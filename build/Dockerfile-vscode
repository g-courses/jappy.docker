# Dockerfile para JAPPY versi√≥n devcontainer con vscode
# Dependencias:
#   imagen docker: gastudil/courses:jappy-jupyter
#   archivos     : https://github.com/g-courses/jappy.rc
#
# Version 1.0

FROM gastudil/courses:jappy-jupyter

LABEL "description"="JAPPY-vscode: Educational resource for programming classes in Java, cPP (C++) and Python with vscode and devcontainer" 

ARG USER=devuser
ARG IMAGE_DIR=https://raw.githubusercontent.com/g-courses/jappy.rc/refs/heads/main/image_dir


# Install VS Code server and extensions
# =====================================
ADD $IMAGE_DIR/tmp/vscode.sh /tmp/vscode.sh
RUN chown $USER:www-data /tmp/vscode.sh && chmod +x /tmp/vscode.sh
RUN /tmp/vscode.sh
RUN rm /tmp/vscode.sh


# Install jappy utils modules
# =====================================

WORKDIR /home/$USER/
RUN mkdir -p .libs/jappy.d/
ADD $IMAGE_DIR/opt/libs/jappy.d/jappy_utils.py /opt/libs/jappy.d/jappy_utils.py
RUN mkdir -p workspace

USER root
ENV PYTHONPATH=/opt/libs/jappy.d/
ENTRYPOINT ["/usr/bin/supervisord", "-c", "/etc/supervisord.conf"]











